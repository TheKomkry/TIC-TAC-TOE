<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <canvas id="gradient-canvas" class="hue-rotate" data-transition-in></canvas>

    <div class="game-container">
        <div class="board" id="board"> <!-- BOARD IS GENERATED HERE --> </div>
        <div class="settings" id="settings-gui" style="right: 0px;">
            <h2>TIC-TAC-TOE</h2>
            <div>
                <label>Board size: </label>
                <input tabindex="auto" type="number" max="20" min="3" id="board-size" placeholder="3 - 20">
            </div>
            <div>
                <label>Connect number</label>
                <input tabindex="auto" type="number" max="8" min="3" id="win-condition" placeholder="3 - 8">
            </div>
            <label id="color-bg" class="color-bg">Changing background color&nbsp;&nbsp;<input type="checkbox" id="color-bg-inp" checked></label>
            <button tabindex="auto" id="play-button" onclick="StartGame()">APPLY SETTINGS</button>
            <div id="show-hide-gui" class="show-hide-gui" onclick="ShowHideGui()">›</div>
            <script>
                document.getElementById('board-size').addEventListener('keyup', function(event) {
                    if (event.keyCode === 13) {
                        document.getElementById('play-button').click();
                    }
                });
                document.getElementById('win-condition').addEventListener('keyup', function(event) {
                    if (event.keyCode === 13) {
                        document.getElementById('play-button').click();
                    }
                });
                document.addEventListener('keydown', function(event) {
                    if (event.keyCode === 27) {
                        document.getElementById('show-hide-gui').click();
                    }
                });
                function ShowHideGui(state){
                    let button = document.getElementById('show-hide-gui');
                    let elem = document.getElementById('settings-gui');

                    if (elem.style.right == '0px' || state == 'hide') {
                        elem.style.right = -(elem.clientWidth * 0.85)+"px";
                        button.innerHTML = "‹";
                        elem.classList.add('settings-label');
                        document.querySelectorAll('[tabindex]').forEach(e => {
                            e.setAttribute('tabindex', '-1');
                        });
                    } else if (elem.style.right == -(elem.clientWidth * 0.85)+"px" || state == 'show') { //‹ › « »
                        elem.style.right = '0px';
                        button.innerHTML = "›";
                        elem.classList.remove('settings-label');
                        document.querySelectorAll('[tabindex]').forEach(e => {
                            e.setAttribute('tabindex', 'auto');
                        });
                    }
                }
                document.getElementById('color-bg-inp').checked = true;
                document.getElementById('color-bg-inp').addEventListener('change', function(event) {
                    let color = document.getElementById('color-bg-inp').checked;
                    let gradient = document.getElementById('gradient-canvas');
                    if (color) {
                        gradient.classList.add('hue-rotate');
                    } else {
                        gradient.classList.remove('hue-rotate');
                    }
                });
            </script>
        </div>
        <div class="hotkeys">
            <img src="images/hotkeys.ico" id="hotkeys-guide" class="hotkeys-guide">
            <div class="hotkeys-container">
                
            </div>
        </div>
    </div>

    <script src="tic-tac-toe.js"></script>
    <script src="Gradient.js"></script>

</body>
</html>